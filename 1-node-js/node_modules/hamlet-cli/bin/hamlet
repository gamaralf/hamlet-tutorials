#!/usr/bin/env node
// Generated by CoffeeScript 1.6.3
(function() {
  var cli, compile, parser, stdin, _ref;

  stdin = require("stdin");

  _ref = require('hamlet-compiler'), parser = _ref.parser, compile = _ref.compile;

  cli = require("commander").version(require('../package.json').version).option("-a, --ast", "Output AST").option("-r, --runtime [provider]", "Runtime provider").parse(process.argv);

  stdin(function(input) {
    var ast, program;
    ast = parser.parse(input);
    if (cli.ast) {
      process.stdout.write(JSON.stringify(ast));
      return;
    }
    program = compile(ast, {
      runtime: cli.runtime
    });
    return process.stdout.write(program);
  });

}).call(this);
